<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktywna Mapa GTA</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }
        #map {
            width: 100%;
            height: 100vh;
        }
        #button-container {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 1000;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 10px;
            border-radius: 5px;
        }
        #coordinates {
            position: absolute; 
            top: 50px; 
            left: 10px; 
            background: rgba(255, 255, 255, 0.8); 
            padding: 10px; 
            border-radius: 5px; 
            z-index: 1000;
        }
    </style>
</head>
<body>

<div id="button-container">
    <button onclick="changeMap('Mapa.png')">Mapa 1</button>
    <button onclick="changeMap('MapaRoadMap.webp')">Mapa 2</button>
    <button onclick="changeMap('MapaSatelita.jpg')">Mapa 3</button>
</div>

<div id="coordinates">
    Współrzędne: <span id="coordsDisplay">brak</span>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
    // Inicjalizacja mapy
    var map = L.map('map', {
        crs: L.CRS.Simple,
        minZoom: -1
    });

    // Ustal granice mapy w pikselach (np. 8192x8192)
    var bounds = [[0, 0], [8192, 8192]]; // Upewnij się, że te wartości odpowiadają wymiarom obrazu

    // Dodanie pierwszej mapy jako tło
    var imageUrl = 'Mapa.png'; // Zmień na domyślną mapę
    var imageLayer = L.imageOverlay(imageUrl, bounds).addTo(map);
    map.fitBounds(bounds);

    // Współrzędne markerów (przykładowe)
    var markers = [
        { id: 'Mumia_1', lat: 2106.74, lng: 3169.58, title: 'Mumia_1', imageUrl: 'Mumia1.png' },
        { id: 'Mumia_2', lat: 2165.49, lng: 3641.83, title: 'Mumia_2', imageUrl: 'Mumia2.png' },
        { id: 'Mumia_3', lat: 2270.75, lng: 3990.00, title: 'Mumia_3', imageUrl: 'Mumia3.png' },
        { id: 'Mumia_4', lat: 2260.88, lng: 3939.00, title: 'Mumia_4', imageUrl: 'Mumia4.png' },
        { id: 'Mumia_5', lat: 2091.38, lng: 4501.75, title: 'Mumia_5', imageUrl: 'Mumia5.png' },
        { id: 'Mumia_6', lat: 2190.88, lng: 4529.00, title: 'Mumia_6', imageUrl: 'Mumia5_6.png' },
        { id: 'Mumia_7', lat: 2311.13, lng: 4483.38, title: 'Mumia_7', imageUrl: 'Mumia6.png' },
        { id: 'Mumia_8', lat: 2536.00, lng: 4594.88, title: 'Mumia_8', imageUrl: 'Mumia7.png' },
        { id: 'Mumia_9', lat: 2591.63, lng: 4702.13, title: 'Mumia_9', imageUrl: 'Mumia8.png' },
        { id: 'Mumia_10', lat: 2819.75, lng: 4470.63, title: 'Mumia_10', imageUrl: 'Mumia9.png' },
        { id: 'Mumia_11', lat: 2722.63, lng: 4481.13, title: 'Mumia_11', imageUrl: 'Mumia10.png' },
        { id: 'Mumia_12', lat: 3471.50, lng: 4890.00, title: 'Mumia_12', imageUrl: 'Mumia11.png' },
        { id: 'Mumia_13', lat: 2845.63, lng: 3502.88, title: 'Mumia_13', imageUrl: 'Mumia12.png' },
        { id: 'Mumia_14', lat: 2656.00, lng: 3006.50, title: 'Mumia_14', imageUrl: 'Mumia13.png' },
        
    ];

    // Funkcja do dodawania znaczników
    function addMarker(marker) {
        var visited = localStorage.getItem(marker.id) === 'true';
        var iconUrl = visited ? 'znacznik.png' : 'znacznik2.png';

        var m = L.marker([marker.lat, marker.lng], {
            icon: L.icon({
                iconUrl: iconUrl,
                iconSize: [30, 30],
                iconAnchor: [15, 50],
                popupAnchor: [0, -40],
            })
        }).addTo(map)
        .bindPopup(marker.title + (visited ? ' (zwiedzone)' : '') + `<br><a href="${marker.imageUrl}" target="_blank"><img src="${marker.imageUrl}" alt="${marker.title}" style="width:100px; height:auto;"></a>`);

        // Zdarzenie kliknięcia na znacznik
        m.on('click', function() {
            visited = !visited; 
            localStorage.setItem(marker.id, visited); 
            
            var newIconUrl = visited ? 'znacznik.png' : 'znacznik2.png';
            m.setIcon(L.icon({
                iconUrl: newIconUrl,
                iconSize: [30, 30],
                iconAnchor: [15, 50],
                popupAnchor: [0, -40],
            }));

            m.setPopupContent(marker.title + (visited ? ' (zwiedzone)' : '') + `<br><a href="${marker.imageUrl}" target="_blank"><img src="${marker.imageUrl}" alt="${marker.title}" style="width:100px; height:auto;"></a>`);
            this.openPopup(); 
        });
    }

    // Dodanie wszystkich znaczników
    markers.forEach(addMarker);

    // Funkcja do zmiany mapy
    function changeMap(mapName) {
        imageLayer.setUrl(mapName);
    }

    // Nasłuchuj kliknięcia w mapę
    map.on('click', function(e) {
        var clickedLat = e.latlng.lat;
        var clickedLng = e.latlng.lng;
        console.log('Współrzędne kliknięcia:', clickedLat, clickedLng);
        document.getElementById('coordsDisplay').innerText = `(${clickedLat.toFixed(2)}, ${clickedLng.toFixed(2)})`;
    });
</script>

</body>
</html>

